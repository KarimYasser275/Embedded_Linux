# 0 "arch/arm64/boot/dts/../../../../nvidia/platform/t19x/galen/kernel-dts/tegra194-p2888-0001-p2822-0000-fe-pi-audio.dts"
# 0 "<built-in>"
# 0 "<command-line>"
# 1 "arch/arm64/boot/dts/../../../../nvidia/platform/t19x/galen/kernel-dts/tegra194-p2888-0001-p2822-0000-fe-pi-audio.dts"
# 10 "arch/arm64/boot/dts/../../../../nvidia/platform/t19x/galen/kernel-dts/tegra194-p2888-0001-p2822-0000-fe-pi-audio.dts"
/dts-v1/;
/plugin/;

# 1 "./nvidia/soc/tegra/kernel-include/dt-common/jetson/tegra194-p2888-0001-p2822-0000.h" 1
# 9 "./nvidia/soc/tegra/kernel-include/dt-common/jetson/tegra194-p2888-0001-p2822-0000.h"
# 1 "./nvidia/soc/t19x/kernel-include/dt-bindings/gpio/tegra194-gpio.h" 1
# 13 "./nvidia/soc/t19x/kernel-include/dt-bindings/gpio/tegra194-gpio.h"
# 1 "./nvidia/soc/tegra/kernel-include/dt-bindings/gpio/gpio.h" 1
# 14 "./nvidia/soc/t19x/kernel-include/dt-bindings/gpio/tegra194-gpio.h" 2
# 10 "./nvidia/soc/tegra/kernel-include/dt-common/jetson/tegra194-p2888-0001-p2822-0000.h" 2
# 14 "arch/arm64/boot/dts/../../../../nvidia/platform/t19x/galen/kernel-dts/tegra194-p2888-0001-p2822-0000-fe-pi-audio.dts" 2
# 1 "./nvidia/platform/tegra/common/kernel-dts/overlays/jetson-fe-pi-audio.dts" 1
# 9 "./nvidia/platform/tegra/common/kernel-dts/overlays/jetson-fe-pi-audio.dts"
# 1 "./nvidia/soc/tegra/kernel-include/dt-bindings/pinctrl/pinctrl-tegra.h" 1
# 10 "./nvidia/platform/tegra/common/kernel-dts/overlays/jetson-fe-pi-audio.dts" 2

/ {
 overlay-name = "FE-PI Audio V1 and Z V2";
 jetson-header-name = "Jetson 40pin Header";
 compatible = "nvidia,p2822-0000+p2888-0001", "nvidia,jetson-xavier-industrial";

 fragment@0 {
  target-path = "/";
  __overlay__ {
   clocks {
    sgtl5000_mclk: sgtl5000_mclk {
     compatible = "fixed-clock";
     #clock-cells = <0>;
     clock-frequency = <12288000>;
     clock-output-names = "sgtl5000-mclk";
     status = "okay";
    };
   };
  };
 };

 fragment@1 {
  target = <&hdr40_i2c1>;
  __overlay__ {
   #address-cells = <1>;
   #size-cells = <0>;

   sgtl5000: sgtl5000@0a {
    compatible = "fsl,sgtl5000";
    reg = <0x0a>;
    clocks = <&sgtl5000_mclk>;
    micbias-resistor-k-ohms = <2>;
    micbias-voltage-m-volts = <3000>;
    VDDA-supply = <&hdr40_vdd_3v3>;
    VDDIO-supply = <&hdr40_vdd_3v3>;
    status = "okay";
   };
  };
 };

 fragment@2 {
  target = <&tegra_sound>;
  __overlay__ {
   nvidia,audio-routing =
    "x Headphone", "x HP_OUT",
    "x MIC_IN", "x Mic",
    "x ADC", "x Mic Bias",
    "x LINE_IN", "x Line In",
    "x Line Out", "x LINE_OUT";
  };
 };

 fragment@3 {
  target = <&hdr40_snd_link_i2s>;
  __overlay__ {
   link-name = "fe-pi-audio-z-v2";
   codec-dai = <&sgtl5000>;
   codec-dai-name = "sgtl5000";
   bitclock-master;
   frame-master;
  };
 };

 fragment@4 {
  target = <&pinmux>;
  __overlay__ {
   pinctrl-names = "default";
   pinctrl-0 = <&jetson_io_pinmux>;

   jetson_io_pinmux: exp-header-pinmux {
    hdr40-pin12 {
     nvidia,pins = "dap2_sclk_ph7";
     nvidia,function = "i2s2";
     nvidia,pull = <1>;
     nvidia,tristate = <0>;
     nvidia,enable-input = <1>;
    };

    hdr40-pin35 {
     nvidia,pins = "dap2_fs_pi2";
     nvidia,function = "i2s2";
     nvidia,pull = <1>;
     nvidia,tristate = <0>;
     nvidia,enable-input = <1>;
    };

    hdr40-pin38 {
     nvidia,pins = "dap2_din_pi1";
     nvidia,function = "i2s2";
     nvidia,pull = <1>;
     nvidia,tristate = <1>;
     nvidia,enable-input = <1>;
    };

    hdr40-pin40 {
     nvidia,pins = "dap2_dout_pi0";
     nvidia,function = "i2s2";
     nvidia,pull = <1>;
     nvidia,tristate = <0>;
     nvidia,enable-input = <0>;
    };
   };
  };
 };
};
# 15 "arch/arm64/boot/dts/../../../../nvidia/platform/t19x/galen/kernel-dts/tegra194-p2888-0001-p2822-0000-fe-pi-audio.dts" 2

/ {
 fragment@2 {
  target = <&tegra_sound>;
  __overlay__ {
   nvidia,audio-routing =
    "y Headphone", "y HP_OUT",
    "y MIC_IN", "y Mic",
    "y ADC", "y Mic Bias",
    "y Line Out", "y LINE_OUT",
    "y LINE_IN", "y Line In";
  };
 };
};
